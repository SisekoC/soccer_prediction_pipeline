# config/feature_definitions.yaml
version: "1.0"

# ============================================================================
# SEMANTIC ANCHORS (used by the hybrid NLP pipeline)
# ============================================================================
semantic_anchors:
  - name: "Injury-prone players"
    description: "The team has several key players who are frequently injured and unavailable for selection."
  - name: "Players returning from injury"
    description: "Important players are coming back from injury and are available for the match."
  - name: "Suspensions and yellow card accumulation"
    description: "Key players are suspended or at risk of suspension due to yellow card accumulation."
  - name: "International duty travel distance vs. recovery time"
    description: "Players have traveled long distances for international duty and have little time to recover before the match."
  - name: "Team news leak timing vs line-up certainty"
    description: "Early team news leaks provide high certainty about the starting line-up."
  - name: "Managerial changes (new manager bounce)"
    description: "The team has recently appointed a new manager, often leading to a temporary boost in performance."
  - name: "Contract disputes vs. player morale"
    description: "There are ongoing contract disputes that could affect player morale and focus."
  - name: "Transfer window distractions"
    description: "Speculation about player transfers is distracting the squad."
  - name: "Weather conditions (wind, rain, snow, heat)"
    description: "Adverse weather conditions like heavy rain, wind, or extreme heat are expected during the match."
  - name: "Pitch conditions (grass vs. artificial turf)"
    description: "The match will be played on artificial turf, which may affect the playing style."
  - name: "Travel distance vs. schedule congestion"
    description: "The team has traveled a long distance and faces a congested fixture schedule."
  - name: "Short rest periods (midweek games)"
    description: "The team has had less than three days of rest due to a midweek fixture."
  - name: "Derby matches (form often goes out the window)"
    description: "This is a local derby where historical rivalry often overrides recent form."
  - name: "Relegation battles (scrappy, low-scoring patterns)"
    description: "The team is fighting relegation, leading to tense, low-scoring encounters."
  - name: "Cup distractions (upcoming big European ties)"
    description: "The team may rotate players with an important European cup match approaching."
  - name: "Referee assignments vs. disciplinary tendencies"
    description: "The appointed referee tends to show many cards or has a history with these teams."
  - name: "VAR tendencies vs. historical intervention rates"
    description: "VAR is likely to intervene frequently based on past matches involving these teams."
  - name: "Set-piece specialists vs. defensive vulnerabilities"
    description: "The team is strong on set pieces while the opponent is vulnerable defending them."
  - name: "Formation mismatches (e.g. three-at-the-back vs. two strikers)"
    description: "The team's formation exploits the opponent's defensive setup."
  - name: "First-half vs. second-half performance splits"
    description: "The team typically performs better in the first half than in the second half."
  - name: "Expected goals (xG) vs. expected goals against (xGA) trends"
    description: "The team's xG is significantly higher than their xGA, indicating dominance."
  - name: "Shot conversion rates (overperformance or underperformance)"
    description: "The team is scoring more goals than their xG would suggest (overperforming)."
  - name: "Pace of play (possession speed and directness)"
    description: "The team plays with high tempo and direct attacking football."
  - name: "Pressing intensity vs. defensive line height"
    description: "The team employs a high press with a high defensive line."
  - name: "Corners won/conceded averages"
    description: "The team wins a high number of corners and concedes very few."
  - name: "Time of possession vs. chances created"
    description: "Despite high possession, the team creates few clear chances."
  - name: "Early goal probabilities"
    description: "The team often scores in the first 15 minutes of the match."
  - name: "Comeback ability (mentality and fitness)"
    description: "The team frequently comes from behind to win or draw."
  - name: "Blowing lead tendencies (mental fragility)"
    description: "The team often concedes late goals after taking the lead."
  - name: "Rest advantage (opponent played midweek, they didn't)"
    description: "The team has had a full week of rest while their opponent played a midweek match."
  - name: "Travel style (charter flight vs. commercial)"
    description: "The team traveled by commercial flight, which may increase fatigue."
  - name: "Altitude adjustments (playing in high altitude cities)"
    description: "The match is being played at high altitude, affecting player performance."
  - name: "Time zone changes for international competitions"
    description: "The team has crossed multiple time zones and may suffer from jet lag."
  - name: "Historical head-to-head dominance (bogey teams)"
    description: "This team has historically struggled against this particular opponent."
  - name: "Streaks (winning/losing runs vs. psychological pressure)"
    description: "The team is on a long winning streak and carries high confidence."
  - name: "Public betting percentages (fading the public)"
    description: "The public is heavily backing the opponent, suggesting value on this team."
  - name: "Line movement velocity (sharp money indicators)"
    description: "The betting line has moved sharply, indicating professional money."
  - name: "Steam moves (sudden, across-the-board line changes)"
    description: "There has been a sudden, simultaneous line move at multiple sportsbooks."
  - name: "Reverse line movement (odds moving opposite public money)"
    description: "Despite most bets on the opponent, the line has moved toward this team."
  - name: "Limit betting (sharp books accepting max bets on certain sides)"
    description: "Sharp books are accepting maximum wagers on this side, a sign of confidence."

# ============================================================================
# STRUCTURED FEATURES (generated by transformers)
# ============================================================================
structured_features:
  team_form:
    - name: "home_points_last_5"
      description: "Points earned by home team in last 5 matches"
      source: "football_data"
      type: "integer"
      range: [0, 15]
    - name: "away_points_last_5"
      description: "Points earned by away team in last 5 matches"
      source: "football_data"
      type: "integer"
      range: [0, 15]
    - name: "home_goals_for_last_5"
      description: "Goals scored by home team in last 5 matches"
      source: "football_data"
      type: "integer"
      range: [0, 30]
    - name: "home_goals_against_last_5"
      description: "Goals conceded by home team in last 5 matches"
      source: "football_data"
      type: "integer"
      range: [0, 30]
    - name: "away_goals_for_last_5"
      description: "Goals scored by away team in last 5 matches"
      source: "football_data"
      type: "integer"
      range: [0, 30]
    - name: "away_goals_against_last_5"
      description: "Goals conceded by away team in last 5 matches"
      source: "football_data"
      type: "integer"
      range: [0, 30]
    - name: "home_form_streak"
      description: "Current win/draw/loss streak for home team (positive for wins, negative for losses)"
      source: "football_data"
      type: "integer"
    - name: "away_form_streak"
      description: "Current win/draw/loss streak for away team"
      source: "football_data"
      type: "integer"

  head_to_head:
    - name: "h2h_home_wins_percentage"
      description: "Percentage of historical matches won by home team"
      source: "football_data"
      type: "float"
      range: [0, 100]
    - name: "h2h_away_wins_percentage"
      description: "Percentage of historical matches won by away team"
      source: "football_data"
      type: "float"
      range: [0, 100]
    - name: "h2h_draws_percentage"
      description: "Percentage of historical matches drawn"
      source: "football_data"
      type: "float"
      range: [0, 100]
    - name: "h2h_avg_goals"
      description: "Average total goals in historical meetings"
      source: "football_data"
      type: "float"

  player_attributes:
    - name: "home_avg_pace"
      description: "Average pace rating of home team's likely starters"
      source: "sofifa"
      type: "float"
      range: [0, 100]
    - name: "home_avg_stamina"
      description: "Average stamina rating of home team's likely starters"
      source: "sofifa"
      type: "float"
      range: [0, 100]
    - name: "home_avg_strength"
      description: "Average strength rating of home team's likely starters"
      source: "sofifa"
      type: "float"
      range: [0, 100]
    - name: "away_avg_pace"
      description: "Average pace rating of away team's likely starters"
      source: "sofifa"
      type: "float"
      range: [0, 100]
    - name: "away_avg_stamina"
      description: "Average stamina rating of away team's likely starters"
      source: "sofifa"
      type: "float"
      range: [0, 100]
    - name: "away_avg_strength"
      description: "Average strength rating of away team's likely starters"
      source: "sofifa"
      type: "float"
      range: [0, 100]
    - name: "pace_difference"
      description: "home_avg_pace - away_avg_pace"
      source: "sofifa"
      type: "float"
      range: [-100, 100]

  betting_markets:
    - name: "home_implied_prob"
      description: "Implied win probability for home team from odds"
      source: "sports_odds"
      type: "float"
      range: [0, 1]
    - name: "away_implied_prob"
      description: "Implied win probability for away team"
      source: "sports_odds"
      type: "float"
      range: [0, 1]
    - name: "draw_implied_prob"
      description: "Implied probability of draw"
      source: "sports_odds"
      type: "float"
      range: [0, 1]
    - name: "odds_movement_velocity"
      description: "Rate of odds change in last 24h (positive means home odds shortening)"
      source: "sports_odds"
      type: "float"
    - name: "steam_move_indicator"
      description: "Binary indicator if a steam move occurred (1) or not (0)"
      source: "sports_odds"
      type: "integer"
      range: [0, 1]

  advanced_stats:
    - name: "home_xg_for_avg"
      description: "Average expected goals for per match (home team)"
      source: "footystats"
      type: "float"
    - name: "home_xg_against_avg"
      description: "Average expected goals against per match (home team)"
      source: "footystats"
      type: "float"
    - name: "away_xg_for_avg"
      description: "Average expected goals for per match (away team)"
      source: "footystats"
      type: "float"
    - name: "away_xg_against_avg"
      description: "Average expected goals against per match (away team)"
      source: "footystats"
      type: "float"
    - name: "home_corners_for_avg"
      description: "Average corners won per match (home team)"
      source: "footystats"
      type: "float"
    - name: "away_corners_for_avg"
      description: "Average corners won per match (away team)"
      source: "footystats"
      type: "float"
    - name: "home_possession_avg"
      description: "Average possession percentage (home team)"
      source: "footystats"
      type: "float"
      range: [0, 100]
    - name: "away_possession_avg"
      description: "Average possession percentage (away team)"
      source: "footystats"
      type: "float"
      range: [0, 100]